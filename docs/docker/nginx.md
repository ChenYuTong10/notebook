# ‚öôÔ∏è Nginx Configuration

## üëÄ What is nginx

`Nginx` (pronounced "engine x") is a popular open-source web server software that is widely used to serve static and dynamic content on the web. It was first released in 2004 by Igor Sysoev, and has since become one of the most popular web servers in use today.

Nginx is known for its high performance and low resource usage, making it particularly well-suited for serving high-traffic websites and applications. It uses an asynchronous, event-driven architecture to handle requests, which allows it to handle a large number of simultaneous connections with relatively low memory usage.

In addition to its use as a web server, Nginx is also often used as a reverse proxy, load balancer, and HTTP cache. It supports a wide range of protocols, including HTTP, HTTPS, SMTP, POP3, and IMAP, and can be used with a variety of programming languages and frameworks.

Overall, Nginx is a versatile and powerful tool that is essential for many web developers and system administrators.

All above is generated by `ChatGPT`.ü•±

## üî® How to run nginx

If you want to run nginx directly on your host machine, you can have a look [here](https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-ubuntu-20-04).
In this note, I mainly introduce how to run it on Docker. The Dockerfile is following.

```dockerfile
# you can choose other mirrors of nginx on https://hub.docker.com/_/nginx
FROM nginx:alpine

# using root user to install the package you need.
USER root

# set alpine mirror
# tsinghua mirror
RUN sed -i "s/dl-cdn.alpinelinux.org/mirrors.ustc.edu.cn/g" /etc/apk/repositories

# update packages
RUN apk update

# install needed packages
RUN apk add --no-cache rsync sudo vim bash curl

RUN apk upgrade

EXPOSE 80
EXPOSE 443

ENTRYPOINT [ "nginx", "-g", "daemon off;" ]
```

After writing Dockerfile, you need to build the image. Replace the `${image-name}` to your desired name.

```shell
$ sudo docker build . -t ${image-name}
```

Finally, running a container.

```shell
$ docker run -p 80:80 -p 443:443 -d ${image-name}
```

## üí° Advanced Settings

Of course, there are lots of advanced settings that I do not have used.

### Alias of container, add network bridge and so on

```shell
$ docker run \
  --name ${container-name} \
  --network ${network-name} \
  --restart always \
  -p 80:80 -p 443:443 \
  -d ${image-name}
```

### SSL certificate

You can need to configure the ssl settings in `nginx.conf` file like following.

```txt
server {
    listen       443 ssl;
    server_name  localhost;
    
    # ssl certificate settings
    ssl_protocols           TLSv1 TLSv1.1 TLSv1.2;
    ssl_certificate         ${your-ssl-certificate};
    ssl_certificate_key     ${your-ssl-key};
    
    location / {
        root        /var/www/html/;
        index       index.html index.htm;
    }

    access_log  /var/log/nginx/access.log;
    error_log   /var/log/nginx/error.log;

    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   html;
    }
}
```

After that, running the command.

```shell
$ docker run \
  --name ${container-name} \
  --network ${network-name} \
  --restart always \
  -p 80:80 -p 443:443 \
  -v ${ssl-certificate-path}:${ssl-certificate-path} \
  -d ${image-name}
```

## üì¶ Conclusion

I only give the main configuration of the whole. If you need more configuration, you can search it by yourself.

This is my real configuration on production environment. You can [download](https://github.com/ChenYuTong10/10note/releases/tag/0.0) if interested it.
